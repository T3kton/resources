sflinks = [
            [ 'proxmox-base', 'vcenter-vm-base' ],
            [ 'proxmox-base', 'manual-foundation-base' ],
            [ 'proxmox-base', 'amt-base' ],
            [ 'proxmox-base', 'ipmi-base' ]
          ]

# https://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_Buster
[ structure.proxmox ]
  description = 'Proxmox'
  parents = [ 'debian-buster-base' ]
[ structure.proxmox.config_values ]
  >repo_list = [
    { distribution = 'buster', type = 'apt', uri = 'http://download.proxmox.com/debian/pve', components = [ 'pve-no-subscription' ], proxy = '{{ mirror_proxy|default( "local" ) }}', key_uri = 'http://download.proxmox.com/debian/proxmox-ve-release-6.x.gpg', key_file='/etc/apt/trusted.gpg.d/proxmox-ve-release-6.x.gpg' }
  ]
  >package_list = [ 'proxmox-ve', 'postfix', 'open-iscsi' ]
  >debconf_selection_list = [
                              'postfix postfix/main_mailer_type        select  Local only',
                            ]
  >postinstall_command_list = [
                                'apt remove -y os-prober',
                                'apt remove -y linux-image-amd64 linux-image-4.19*',
                                'update-grub'
                              ]

# configure additional storage
# configure additional networking  - requires rebooting
# 
# iface vmbr0 inet static
#         address  10.10.10.1
#         netmask  255.255.255.0
#         bridge_ports none
#         bridge_stp off
#         bridge_fd 0
#
#         post-up   echo 1 > /proc/sys/net/ipv4/ip_forward
#         post-up   iptables -t nat -A POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE
#         post-down iptables -t nat -D POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE
